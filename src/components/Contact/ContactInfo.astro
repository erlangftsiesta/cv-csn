---
// src/components/Contact/ContactInfo.astro

interface ContactDetails {
  phone: string;
  name: string;
  title: string;
  address: string;
  mapsUrl: string;
}

interface Props {
  details: ContactDetails;
}

const { details } = Astro.props;

const contactMethods = [
  {
    icon: '📞',
    label: 'Telepon',
    value: details.phone,
    href: `tel:${details.phone}`,
    desc: 'Hubungi langsung'
  },
  {
    icon: '💬',
    label: 'WhatsApp',
    value: details.phone,
    href: `https://wa.me/62${details.phone.slice(1)}`,
    desc: 'Chat langsung',
    target: '_blank'
  },
  {
    icon: '📧',
    label: 'Email',
    value: 'contact@csn.id',
    href: 'mailto:contact@csn.id',
    desc: 'Kirim email'
  },
  {
    icon: '📍',
    label: 'Alamat',
    value: 'Bekasi, Jawa Barat',
    href: details.mapsUrl,
    desc: 'Buka di Maps',
    target: '_blank'
  }
];
---

<style>
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .info-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: slideInRight 0.6s ease-out backwards;
  }

  .info-card:nth-child(1) { animation-delay: 0.1s; }
  .info-card:nth-child(2) { animation-delay: 0.2s; }
  .info-card:nth-child(3) { animation-delay: 0.3s; }
  .info-card:nth-child(4) { animation-delay: 0.4s; }

  .info-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 32px rgba(34, 197, 94, 0.15);
  }

  .icon-box {
    transition: all 0.3s ease;
  }

  .info-card:hover .icon-box {
    transform: scale(1.1);
  }

  .contact-person {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  }

  .map-container {
    border-radius: 1rem;
    overflow: hidden;
    height: 300px;
  }
</style>

<div class="space-y-6">
  <!-- Header -->
  <div>
    <h2 class="text-3xl font-bold text-slate-900 mb-3">Informasi Kontak</h2>
    <p class="text-slate-600">Hubungi kami melalui berbagai channel yang tersedia</p>
  </div>

  <!-- Contact Person Card -->
  <div class="info-card contact-person text-white rounded-2xl p-8 shadow-lg">
    <div class="flex items-start gap-4 mb-6">
      <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-2xl">
        👤
      </div>
      <div class="flex-1">
        <h3 class="text-2xl font-bold">{details.name}</h3>
        <p class="text-emerald-100">{details.title}</p>
      </div>
    </div>
    <p class="text-emerald-50 text-sm leading-relaxed mb-4">
      Siap membantu Anda dengan konsultasi produk, harga, dan kebutuhan bisnis feedmill & poultry shop Anda.
    </p>
    <a 
      href={`https://wa.me/62${details.phone.slice(1)}`}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-2 bg-white text-emerald-600 hover:bg-emerald-50 font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105"
    >
      <span>💬</span>
      <span>Chat via WhatsApp</span>
    </a>
  </div>

  <!-- Contact Methods Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    {contactMethods.map((method) => (
      <a
        href={method.href}
        target={method.target}
        rel={method.target === '_blank' ? 'noopener noreferrer' : ''}
        class="info-card bg-white border border-slate-200 rounded-2xl p-6 hover:border-emerald-300"
      >
        <div class="flex items-start gap-4">
          <div class="icon-box w-14 h-14 bg-emerald-50 rounded-xl flex items-center justify-center text-2xl flex-shrink-0">
            {method.icon}
          </div>
          <div class="flex-1 min-w-0">
            <h4 class="font-bold text-slate-900 mb-1">{method.label}</h4>
            <p class="text-sm text-slate-600 truncate font-mono">{method.value}</p>
            <p class="text-xs text-emerald-600 font-semibold mt-2 opacity-0 group-hover:opacity-100 transition-opacity">
              {method.desc} →
            </p>
          </div>
        </div>
      </a>
    ))}
  </div>

  <!-- Address Section -->
  <div class="info-card bg-slate-50 border border-slate-200 rounded-2xl p-6">
    <h4 class="font-bold text-slate-900 mb-3">📍 Alamat Kantor</h4>
    <p class="text-slate-700 leading-relaxed mb-4">
      {details.address}
    </p>
    <a
      href={details.mapsUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-2 text-emerald-600 hover:text-emerald-700 font-semibold transition-colors"
    >
      <span>Buka di Google Maps</span>
      <span>→</span>
    </a>
  </div>

  <!-- Map Embed -->
  <div class="info-card map-container border border-slate-200 rounded-2xl overflow-hidden shadow-lg">
    <iframe
      width="100%"
      height="100%"
      frameborder="0"
      style="border:0"
      src={`https://www.google.com/maps/embed/v1/place?key=AIzaSyDLZYw0sFpquNPbLPqDg3PAMr83Weo73D0&q=-6.382540702819824,106.92509460449219`}
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
    >
    </iframe>
  </div>

  <!-- Quick Facts -->
  <div class="grid grid-cols-3 gap-3">
    <div class="info-card bg-emerald-50 border border-emerald-200 rounded-xl p-4 text-center">
      <div class="text-2xl mb-2">📦</div>
      <p class="text-sm font-bold text-emerald-900">5 Lokasi</p>
      <p class="text-xs text-emerald-700">Gudang Strategis</p>
    </div>
    <div class="info-card bg-blue-50 border border-blue-200 rounded-xl p-4 text-center">
      <div class="text-2xl mb-2">⚡</div>
      <p class="text-sm font-bold text-blue-900">Cepat</p>
      <p class="text-xs text-blue-700">Pengiriman</p>
    </div>
    <div class="info-card bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center">
      <div class="text-2xl mb-2">✅</div>
      <p class="text-sm font-bold text-yellow-900">Terjamin</p>
      <p class="text-xs text-yellow-700">Kualitas</p>